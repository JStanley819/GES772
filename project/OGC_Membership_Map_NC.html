<!DOCTYPE html>
<html>
<head>

	<title>OGC Membership Map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">


		<link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
		<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.css" />
		<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.Default.css" />

		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
		<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>

		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js'></script>
    <script type='text/javascript' src='http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js'></script>
    <script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/leaflet.markercluster.js'></script>


	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		#map {
			width: 1000px;
			height: 600px;
		}
	</style>


</head>
<body>

<div id='map'></div>

<script src="E:\GES772\Project\OGC_Membership.js" type="text/javascript"></script>

<script>

	/* var map = L.map('map').setView([0, 0], 2); */

	/*Map attribution */
	var mapboxAttri = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		mapboxUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic2hoNSIsImEiOiJjamVnZDJsOGQyZHNmMndxZTlqNnhlYW50In0.FC9oeiu5qtD9o19qjlfkMg';

	/* Use Leaflet base layers */
	var grayscale   = L.tileLayer(mapboxUrl, {id: 'mapbox.light', attribution: mapboxAttri}),
			streets  = L.tileLayer(mapboxUrl, {id: 'mapbox.streets',   attribution: mapboxAttri});
	var baseLayers = {
			"Grayscale": grayscale,
			"Streets": streets
	};

	/*Initiate map, define initial center point and zoom level */
	var map = L.map('map', {
			center: [0, 0],
			zoom: 2,
			layers: [grayscale]
		});


/*	function onEachFeature(feature, layer) {
		var popupContent = "<p><b>Name: </b>" +
				feature.properties.Name + "<br/><b>Org Type: </b>" +
				feature.properties.OrgType + "<br/><b>Level: </b>" +
				feature.properties.Level + "</p>";

		if (feature.properties && feature.properties.popupContent) {
			popupContent += feature.properties.popupContent;
		}

		layer.bindPopup(popupContent);
	}

	memberLayer =  L.geoJson(OGCMembers, {

		style: function (feature) {
			return feature.properties && feature.properties.style;
		},

		onEachFeature: onEachFeature,

		pointToLayer: function (feature, latlng) {
			return L.circleMarker(latlng, {
				radius: 4,
				fillColor: "#0058ff",
				color: "#000",
				weight: 1,
				opacity: 1,
				fillOpacity: 0.8
			});
		}

	}); */
	/* .addTo(map); */


	var uni = L.layerGroup();
	var govf = L.layerGroup();
	var tech = L.layerGroup();
	var assoc = L.layerGroup();
	var other = L.layerGroup();
	var com = L.layerGroup();
	var govl = L.layerGroup();
	var govs = L.layerGroup();
	var ind = L.layerGroup();

/*	membersLayer = L.geoJson(OGCMembers, {
	    onEachFeature: function(feature, layer) {

	        if (feature.properties.Level == 'University') {
	            layer.addTo(uni);
	        } else
					if (feature.properties.Level == 'GovFuture-Local') {
	            layer.addTo(govf);
	        } else
					if (feature.properties.Level == 'Technical') {
	        		layer.addTo(tech);
	        } else
					if (feature.properties.Level == 'Associate') {
	        		layer.addTo(assoc);
	        } else
					if (feature.properties["Org Type"] == 'Commercial') {
	        		layer.addTo(com);
					} else
					if (feature.properties["Org Type"] == 'Government-Local') {
	        		layer.addTo(govl);
					} else
					if (feature.properties["Org Type"] == 'Government-Subnational') {
	        		layer.addTo(govs);
					} else
					if (feature.properties["Org Type"] == 'Individual') {
	        		layer.addTo(ind);
					} else {
							layer.addTo(other);
					}

	        }
	});  */

	levelLayer = L.geoJson(OGCMembers, {
		    onEachFeature: function(feature, layer) {

		        if (feature.properties.Level == 'University') {
		            layer.addTo(uni);
		        } else
						if (feature.properties.Level == 'GovFuture-Local') {
		            layer.addTo(govf);
		        } else
						if (feature.properties.Level == 'Technical') {
		        		layer.addTo(tech);
		        } else
						if (feature.properties.Level == 'Associate') {
		        		layer.addTo(assoc);
		        } else {
								layer.addTo(other);
						}

		        }
		});

		orgLayer = L.geoJson(OGCMembers, {
			    onEachFeature: function(feature, layer) {

							if (feature.properties["Org Type"] == 'Commercial') {
			        		layer.addTo(com);
							} else
							if (feature.properties["Org Type"] == 'Government-Local') {
			        		layer.addTo(govl);
							} else
							if (feature.properties["Org Type"] == 'Government-Subnational') {
			        		layer.addTo(govs);
							} else
							if (feature.properties["Org Type"] == 'Individual') {
			        		layer.addTo(ind);
							} else {
									layer.addTo(other);
							}

			        }
			});

	/* All overlays (non-basemap layers) that will appear in the layer control interface must appear
   together in a variable */
	var overlays = {
//		"Members" : memberLayer,
		"Level: Associate" : assoc,
		"Level: GovFuture-Local" : govf,
		"Level: Technical" : tech,
		"Level: University" : uni,
		"Org Type: Commercial" : com,
		"Org Type: Government-Local" : govl,
		"Org Type: Government-Subnational" : govs,
		"Org Type: Individual" : ind,
		"Other" : other
	};

	/*Adds Layer Control interface to the map */
	var layerControl = L.control.layers(baseLayers, overlays, {collapsed : false, position : 'topright'});
	map.addControl(layerControl);

</script>



</body>
</html>
