<!DOCTYPE html>
<html>
<head>

	<title>OGC Membership Map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">


		<link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
		<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.css" />
		<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.Default.css" />

		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
		<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>

		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js'></script>
    <script type='text/javascript' src='http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js'></script>
    <script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/leaflet.markercluster.js'></script>


	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		#map {
			width: 1000px;
			height: 600px;
		}
	</style>


</head>
<body>

<div id='map'></div>

<script src="E:\GES772\Project\OGC_Membership.js" type="text/javascript"></script>

<script>

	/* var map = L.map('map').setView([0, 0], 2); */

	/*Map attribution */
	var mapboxAttri = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		mapboxUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic2hoNSIsImEiOiJjamVnZDJsOGQyZHNmMndxZTlqNnhlYW50In0.FC9oeiu5qtD9o19qjlfkMg';

	/* Use Leaflet base layers */
	var grayscale   = L.tileLayer(mapboxUrl, {id: 'mapbox.light', attribution: mapboxAttri}),
			streets  = L.tileLayer(mapboxUrl, {id: 'mapbox.streets',   attribution: mapboxAttri});
	var baseLayers = {
			"Grayscale": grayscale,
			"Streets": streets
	};

	/*Initiate map, define initial center point and zoom level */
	var map = L.map('map', {
			center: [0, 0],
			zoom: 2,
			layers: [grayscale]
		});

/*	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox.light'
	}).addTo(map); */


	function onEachFeature(feature, layer) {
		var popupContent = "<p><b>Name: </b>" +
				feature.properties.Name + "<br/><b>Org Type: </b>" +
				feature.properties.OrgType + "<br/><b>Level: </b>" +
				feature.properties.Level + "</p>";

		if (feature.properties && feature.properties.popupContent) {
			popupContent += feature.properties.popupContent;
		}

		layer.bindPopup(popupContent);
	}

	memberLayer = L.geoJson(OGCMembers, {

		style: function (feature) {
			return feature.properties && feature.properties.style;
		},

		onEachFeature: onEachFeature,

		pointToLayer: function (feature, latlng) {
			return L.circleMarker(latlng, {
				radius: 4,
				fillColor: "#0058ff",
				color: "#000",
				weight: 1,
				opacity: 1,
				fillOpacity: 0.8
			});
		}

	});
	/* .addTo(map); */

/*	var University = L.layerGroup();
	var GovFuture = L.layerGroup();
	var Technical = L.layerGroup();
	var Associate = L.layerGroup();
	var Other = L.layerGroup();

	L.geoJson(OGCMembers, {
	    onEachFeature: function(feature, layer) {
	        if (feature.properties.Level == 'University') {
	            layer.addTo(University);
	        }
					if (feature.properties.Level == 'GovFuture-Local') {
	            layer.addTo(GovFuture);
	        }
					if (feature.properties.Level == 'Technical') {
	        		layer.addTo(Technical);
	        }
					if (feature.properties.Level == 'Associate') {
	        		layer.addTo(Associate);
	        } else {
	        		layer.addTo(Other);
	        }
	    }
	});

	/*Create clustering system.  maxClusterRadius controls the precision used during cluster formation */
	var clusterSettings = {
		maxClusterRadius : 50,
  	};

	var markerClustersSample = L.markerClusterGroup(clusterSettings);

	/* All overlays (non-basemap layers) that will appear in the layer control interface must appear
   together in a variable */
	var overlays = {
	/* Layers that use the clustering system must be added to the markerClusterGroup before it
	   the markerClusterGroup can be added to the Layer Control */
		"Members" : markerClustersSample.addLayer(memberLayer),
	//	"University" : markerClustersSample.addLayer(University),
	//	"GovFuture-Local" : markerClustersSample.addLayer(GovFuture),
//		"Technical" : markerClustersSample.addLayer(Technical),
	//	"Associate" : markerClustersSample.addLayer(Associate),
	//	"Other" : markerClustersSample.addLayer(Other)
	};

	/*Adds Layer Control interface to the map */
	var layerControl = L.control.layers(baseLayers, overlays, {collapsed : false, position : 'topright'});
	map.addControl(layerControl);

</script>



</body>
</html>
